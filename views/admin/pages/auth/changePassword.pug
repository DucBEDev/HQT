extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main 
    +alert-error(3000)
    +alert-success(3000)

    div(id="empList" data-emp=empList class="d-none")
    div(id="dgList" data-dg=dgList class="d-none")

    .container-fluid
        .row.justify-content-center
            .col-md-8.col-lg-6
                .card.shadow
                    .card-header.bg-primary.text-white
                        h4.mb-0.text-center
                            i.fas.fa-key.me-2.mr-2
                            | Đổi Mật Khẩu
                    
                    .card-body
                        form#changePasswordForm(method="POST" action=`${prefixAdmin}/auth/changePass`)
                            // Radio buttons để chọn loại tài khoản
                            .mb-4
                                label.form-label.fw-bold Chọn loại tài khoản:
                                .d-flex.gap-4
                                    .form-check
                                        input.form-check-input#radioLibrarian(type="radio" name="userType" value="librarian" checked)
                                        label.form-check-label(for="radioLibrarian" class="mr-2")
                                            i.fas.fa-user-tie.me-2
                                            | Thủ thư
                                    .form-check
                                        input.form-check-input#radioReader(type="radio" name="userType" value="reader")
                                        label.form-check-label(for="radioReader" class="mr-2")
                                            i.fas.fa-user-graduate.me-2
                                            | Độc giả

                            // Dropdown chọn mã người dùng
                            .mb-3
                                label.form-label(for="userSelect") 
                                    span#userTypeLabel Mã thủ thư:
                                    span.text-danger *
                                div 
                                    select.form-control#userSelect(name="userId" required)
                                        option(value="" disabled selected) -- Chọn mã --
                                .invalid-feedback
                                    | Vui lòng chọn mã người dùng

                            // Input mật khẩu mới
                            .mb-3
                                label.form-label(for="newPassword") 
                                    | Mật khẩu mới:
                                    span.text-danger *
                                .input-group
                                    input.form-control#newPassword(type="password" name="newPassword" required minlength="6" placeholder="Nhập mật khẩu mới")
                                    button.btn.btn-outline-secondary#toggleNewPassword(type="button")
                                        i.fas.fa-eye
                                .invalid-feedback
                                    | Mật khẩu phải có ít nhất 6 ký tự
                                .form-text.text-muted
                                    | Mật khẩu nên có ít nhất 6 ký tự

                            // Input xác nhận mật khẩu
                            .mb-4
                                label.form-label(for="confirmPassword") 
                                    | Xác nhận mật khẩu:
                                    span.text-danger *
                                .input-group
                                    input.form-control#confirmPassword(type="password" name="confirmPassword" required placeholder="Nhập lại mật khẩu mới")
                                    button.btn.btn-outline-secondary#toggleConfirmPassword(type="button")
                                        i.fas.fa-eye
                                .invalid-feedback#confirmPasswordError
                                    | Mật khẩu xác nhận không khớp

                            // Buttons
                            .d-grid.gap-2.d-md-flex.justify-content-md-end
                                button.btn.btn-secondary.me-md-2.ml-2(type="button" onclick="window.history.back()")
                                    i.fas.fa-arrow-left.me-2
                                    | Quay lại
                                button.btn.btn-primary.ml-2(type="submit")
                                    i.fas.fa-save.me-2.mr-2
                                    | Đổi mật khẩu

    script(src="/vendor/jquery/jquery.min.js")
    script(src="/js/validation.js")
    script(src="/js/adminjs/auth/changePass.js")
        