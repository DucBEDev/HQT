doctype html
html(lang="vi")
    head
        meta(charset="UTF-8")
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        title Trang chủ - Thư viện
        link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css")
        link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css")
        style.
            body {
                background-color: #f8f9fa;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }
            .navbar {
                background: linear-gradient(90deg, #007bff, #00c4b4);
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .navbar-brand {
                font-weight: bold;
                color: white !important;
                display: flex;
                align-items: center;
            }
            .navbar-brand img {
                height: 40px;
                margin-right: 10px;
            }
            .card {
                border: none;
                border-radius: 15px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                transition: transform 0.3s, box-shadow 0.3s;
                background-color: #fff;
            }
            .card:hover {
                transform: translateY(-10px);
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            }
            .card-img-top {
                border-top-left-radius: 15px;
                border-top-right-radius: 15px;
                height: 250px;
                object-fit: cover;
            }
            .card-body {
                padding: 20px;
            }
            .card-title {
                color: #1a3c6d;
                font-weight: 600;
                font-size: 1.25rem;
                margin-bottom: 10px;
            }
            .card-text {
                color: #555;
                font-size: 0.95rem;
                margin-bottom: 8px;
            }
            .price-badge {
                background-color: #ffc107;
                color: #1a3c6d;
                font-weight: bold;
                padding: 5px 10px;
                border-radius: 12px;
                font-size: 0.9rem;
            }
            .badge-success {
                background-color: #28a745;
                font-size: 0.85rem;
                padding: 5px 10px;
            }
            .badge-danger {
                background-color: #dc3545;
                font-size: 0.85rem;
                padding: 5px 10px;
            }
            .input-group {
                border-radius: 50px;
                overflow: hidden;
                box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
                background-color: #fff;
            }
            .form-control, .form-select {
                border: none;
                border-radius: 50px;
                padding: 12px 20px;
                font-size: 1rem;
            }
            .form-control:focus, .form-select:focus {
                box-shadow: 0 0 8px rgba(0, 123, 255, 0.3);
                border-color: #007bff;
            }
            .btn-primary {
                background: linear-gradient(45deg, #007bff, #00c4b4);
                border: none;
                border-radius: 50px;
                padding: 12px 24px;
                font-size: 1rem;
                transition: background 0.3s;
            }
            .btn-primary:hover {
                background: linear-gradient(45deg, #0056b3, #009688);
            }
            .search-icon {
                margin-right: 8px;
            }
            .footer {
                background-color: #1a3c6d;
                color: white;
                padding: 30px 0;
                margin-top: 50px;
            }
            .footer a {
                color: #00c4b4;
                text-decoration: none;
                transition: color 0.3s;
            }
            .footer a:hover {
                color: #ffffff;
            }
            @media (max-width: 768px) {
                .navbar-brand img {
                    height: 30px;
                }
                .input-group {
                    flex-direction: column;
                }
                .form-control, .btn-primary, .form-select {
                    width: 100%;
                    margin-bottom: 10px;
                    border-radius: 25px;
                }
                .card-img-top {
                    height: 200px;
                }
                .card-title {
                    font-size: 1.1rem;
                }
                .card-text {
                    font-size: 0.9rem;
                }
            }

    body
        // Header
        nav.navbar.navbar-expand-lg.navbar-dark.fixed-top
            .container
                a.navbar-brand(href="/")
                    span Thư viện thông minh
                button.navbar-toggler(type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation")
                    span.navbar-toggler-icon
                #navbarNav.collapse.navbar-collapse
                    ul.navbar-nav.ms-auto
                        li.nav-item
                            a.nav-link.text-white(href="#") Trang chủ

        // Main content
        .container.py-5.mt-5
            .row.mb-5.align-items-center
                .col-md-8.mb-3.mb-md-0
                    .input-group
                        input.form-control(type="search" placeholder="Tìm kiếm sách..." id="searchInput")
                        button.btn.btn-primary(type="button")
                            i.fas.fa-search.search-icon
                            | Tìm kiếm

            .row#booksList
                each book in books || []
                    .col-md-4.col-sm-6.mb-4.detail-book(data-id=book.ISBN)
                        .card.h-100
                            if book.HinhAnhPath
                                img.card-img-top(src=book.HINHANHPATH alt=book.Tensach)
                            else
                                img.card-img-top(src="/images/default-book.jpg" alt="Default book image")
                            .card-body
                                h5.card-title= book.Tensach
                                if book.HOTENTG
                                    p.card-text
                                        i.fas.fa-user-pen.me-2
                                        strong Tác giả: 
                                        span= book.HOTENTG
                                if book.NHAXB
                                    p.card-text
                                        i.fas.fa-building.me-2
                                        strong Nhà xuất bản: 
                                        span= book.NHAXB
                                if book.Gia
                                    p.card-text
                                        i.fas.fa-tag.me-2
                                        strong Giá: 
                                        - const price = book.Gia.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")
                                        span.price-badge= price + ' ₫'
                                if book.SOLUONGCHOMUON > 0
                                    p.card-text
                                        span.badge.badge-success Còn #{book.SOLUONGCHOMUON} sách
                                else
                                    p.card-text
                                        span.badge.badge-danger Hết sách

        // Footer
        footer.footer.text-center
            .container
                p.mb-2 &copy; 2025 Thư viện thông minh. All rights reserved.
                p.mb-1
                    a(href="/privacy") Chính sách bảo mật
                    |  | 
                    a(href="/terms") Điều khoản sử dụng
                p
                    | Liên hệ: 
                    a(href="mailto:support@library.com") support@library.com

        form(
            action=""
            id="form-detail-book"
        )

        script(src="/vendor/jquery/jquery.min.js")
        script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js")
        script.
            document.addEventListener('DOMContentLoaded', function() {
                const searchInput = document.getElementById('searchInput');
                
                function performSearch() {
                    const searchTerm = searchInput.value.toLowerCase().trim();
                    const bookCards = document.querySelectorAll('.detail-book');
                    
                    bookCards.forEach(card => {
                        const title = card.querySelector('.card-title').textContent.toLowerCase();
                        const shouldShow = searchTerm === '' || title.includes(searchTerm);
                        card.style.display = shouldShow ? 'block' : 'none';
                    });
                }
                
                searchInput.addEventListener('input', performSearch);
                document.querySelector('.btn-primary').addEventListener('click', performSearch);
            });

            $(document).ready(function () {
                $('.detail-book').on('click', function() {
                    const id = $(this).data('id')
                    $('#form-detail-book').attr('action', `/Library/dashboard/detail/${id}`)
                    $('#form-detail-book').submit()
                })
            })